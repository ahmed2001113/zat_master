(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[280],{77304:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var l=t(85893),i=t(61903),a=t(94054),r=t(33841),s=t(78330),o=t(23599),c=t(26131),d=t.n(c),u=t(67294),h=t(77572),p=t(82729),m=t(93801);function v(){let e=(0,p._)(["\n\nquery {\n    allowedCountryStates(country: EG){\n      code\n      name\n      \n    }\n  }"]);return v=function(){return e},e}let g=(0,m.ZP)(v());var f=e=>{let{input:n,handleOnChange:t,isShipping:c,isbilling:p,gov:m}=e,[v,f]=(0,u.useState)([]);return(0,u.useEffect)(()=>{(async()=>{let{data:e}=await h.ZP.query({query:g});f(e.allowedCountryStates)})()},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"".concat(d().wrapper),children:(0,l.jsx)(i.Z,{name:"email",type:"email",defaultValue:null==n?void 0:n.email,required:!0,onChange:t,label:"Email",className:"  w-full m-auto"})}),(0,l.jsxs)("div",{className:"".concat(d().wrapper),children:[(0,l.jsx)(i.Z,{required:!0,name:"firstname",id:"outlined-required",label:"firstname",defaultValue:null==n?void 0:n.firstname,onChange:t,className:"".concat(d().input)}),(0,l.jsx)(i.Z,{required:!0,id:"outlined-required",label:"lastname",defaultValue:null==n?void 0:n.lastname,onChange:t,name:"lastname",className:"".concat(d().input)}),(0,l.jsx)(i.Z,{name:"phone",defaultValue:null==n?void 0:n.phone,required:!0,onChange:t,label:"Phone",className:"".concat(d().input)})]}),(0,l.jsx)("div",{className:"".concat(d().wrapper),children:(0,l.jsx)(i.Z,{required:!0,id:"outlined-required",label:"street address",defaultValue:null==n?void 0:n.streetaddress,onChange:t,className:" w-full m-auto",placeholder:"House number and street name",name:"streetaddress"})}),(0,l.jsxs)("div",{className:"".concat(d().wrapper),children:[(0,l.jsx)(i.Z,{required:!0,id:"outlined-required",label:"Town/City",defaultValue:null==n?void 0:n.city,onChange:t,className:"".concat(d().input),placeholder:"City Name",name:"city"}),(0,l.jsx)(i.Z,{name:"zip",id:"outlined-required",label:"Post code",defaultValue:null==n?void 0:n.zip,onChange:t,className:"".concat(d().input),placeholder:"House number and street name"}),(0,l.jsxs)(a.Z,{style:{marginLeft:"auto",width:"100%"},children:[(0,l.jsx)(r.Z,{children:"government"}),(0,l.jsxs)(s.Z,{label:"government",onChange:t,required:!0,name:"state",defaultValue:null==n?void 0:n.state,children:[(0,l.jsx)(o.Z,{value:""}),v.map(e=>(0,l.jsx)(o.Z,{value:e.code,children:e.name},e.name))]})]})]})]})}},92430:function(e,n,t){"use strict";t.d(n,{N:function(){return S}});var l=t(85893),i=t(79299),a=t(96456),r=t(9473),s=t(26131),o=t.n(s),c=t(15861),d=t(12963),u=t(61903),h=t(67294),p=t(63390),m=t(77304),v=t(45697),g=t.n(v);let f=e=>{let{handleOnChange:n,checked:t,name:i,label:a,placeholder:r,containerClassNames:s}=e;return(0,l.jsx)("div",{className:s,children:(0,l.jsxs)("label",{className:"leading-7 text-md text-gray-700 flex items-center cursor-pointer",htmlFor:i,children:[(0,l.jsx)("input",{onChange:n,placeholder:r,type:"checkbox",checked:t,name:i,id:i}),(0,l.jsx)("span",{className:"ml-2",children:a||""})]})})};f.propTypes={handleOnChange:g().func,checked:g().bool,name:g().string,type:g().string,label:g().string,placeholder:g().string,containerClassNames:g().string},f.defaultProps={handleOnChange:()=>null,checked:!1,name:"",label:"",placeholder:"",errors:{},containerClassNames:""};var x=t(94184),y=t.n(x),b=t(64598),j=t(11163),_=t(54433),N=t(41664),k=t.n(N);t(41609),t(45220);let C={firstname:"",lastname:"",phone:"",email:"",streetaddress:"",apartment:"",city:"",state:"",postcode:"",address1:"",errors:null,company:""},S=e=>{let{item:n}=e,t=(0,j.useRouter)(),[s,v]=(0,h.useState)("option1"),{IsPaypal:g,current:x,total:N}=(0,r.v9)(i.MS),S=(0,r.I0)(),w=[],T=0;w=(0,r.v9)(p.L9),T=(0,r.v9)(p._j);let I=(0,r.v9)(i.hz),P={billing:{...C},shipping:{...I},ordernotes:"",billingDifferentThanShipping:!1,paymentMethod:g?"visa":"cod"},[O,Z]=(0,h.useState)(P),[M,E]=(0,h.useState)(null),[q,D]=(0,h.useState)(!1),[F,U]=(0,h.useState)({});n&&(w=[n],T=n.price),(0,h.useEffect)(()=>{S(a.ep.setItems(w)),S(a.ep.setInput(O))},[]);let V=async e=>{e.preventDefault(),Z({...O,billing:{...O.billing}}),"visa"===O.paymentMethod||await (0,b.xu)(O,w,E,D,U)},z=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{target:{name:l,value:i}}=e||{};if("billingDifferentThanShipping"===l){let e={...O,[l]:!O.billingDifferentThanShipping};Z(e)}else if(n){if(t){let e={...O,shipping:{...null==O?void 0:O.shipping,[l]:i}};Z(e)}else{setBillingValid(!1);let e={...O,billing:{...null==O?void 0:O.billing,[l]:i}};Z(e),S(a.ep.setInput(O))}}else if("paymentMethod"===l){let e={...O,[l]:i};Z(e),"visa"===i?(S(a.ep.SetPaymentMethod([!0,T])),document.body.scrollTop=0,document.documentElement.scrollTop=0):(S(a.ep.SetPaymentMethod([!1,T])),document.body.scrollTop=190,document.documentElement.scrollTop=190)}else{let e={...O,[l]:i};Z(e)}},B=()=>S(a.ep.prev());(0,h.useEffect)(()=>{0!==Object.keys(F).length&&(n?S(a.ep.SetUserOrder({cartItems:w,orderCreation:F,TotalCart:T,orderInferomation:O.billingDifferentThanShipping?O.billing:O.shipping})):(S(a.ep.SetUserOrder({cartItems:w,orderCreation:F,TotalCart:T,orderInferomation:O.billingDifferentThanShipping?O.billing:O.shipping})),S(_.$.EmptyCartItems())),t.push("/checkout/thankYou"))},[F]);let R=[(0,l.jsx)(k(),{underline:"hover",color:"inherit",href:"/",className:"link",children:"Home"},"1"),,(0,l.jsx)("button",{color:"text.primary",onClick:B,className:"link",children:"Shoping Information"},"3"),(0,l.jsx)(c.Z,{color:"text.primary",className:"link",children:"Billing And Payment Process"},"3")],H="".concat(null==I?void 0:I.firstname," \n    ").concat(null==I?void 0:I.lastname,", ").concat(null==I?void 0:I.streetaddress,"/").concat(null==I?void 0:I.apartment,"/").concat(null==I?void 0:I.city,",\n     ").concat(null==I?void 0:I.government,", ").concat(null==I?void 0:I.zip,", Egypt");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.Z,{separator:"›","aria-label":"breadcrumb",children:R}),(0,l.jsxs)("div",{className:"".concat(o().container," mt-5"),children:[(0,l.jsxs)("div",{className:"".concat(o().element),children:[(0,l.jsx)("p",{children:"contact"}),(0,l.jsx)("p",{children:null==I?void 0:I.email}),(0,l.jsx)("button",{onClick:B,children:"change"})]}),(0,l.jsxs)("div",{className:"".concat(o().element),children:[(0,l.jsx)("p",{children:"ship To"}),(0,l.jsx)("p",{className:"".concat(o().userInfo),children:H}),(0,l.jsx)("button",{onClick:B,children:"change"})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)("div",{children:(0,l.jsx)(l.Fragment,{children:w?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("form",{onSubmit:V,children:[(0,l.jsx)("h6",{className:"mt-2",children:"Payment"}),(0,l.jsx)("p",{children:"All transactions are secure and encrypted."}),(0,l.jsxs)("div",{className:"form_visa",children:[(0,l.jsx)("div",{className:"form-check woo-next-payment-input-container mt-2",children:(0,l.jsxs)("label",{className:"form-check-label",children:[(0,l.jsx)("input",{onChange:z,value:"cod",className:"form-check-input mr-3 ra",name:"paymentMethod",type:"radio",checked:"cod"===O.paymentMethod}),(0,l.jsx)("span",{className:"woo-next-payment-content",children:"cash on Delivery "})]})}),(0,l.jsx)("div",{className:"form-check woo-next-payment-input-container mt-2",children:(0,l.jsxs)("label",{className:"form-check-label",children:[(0,l.jsx)("input",{onChange:z,value:"visa",className:"form-check-input mr-3 ra",name:"paymentMethod",type:"radio",checked:"visa"===O.paymentMethod}),(0,l.jsx)("span",{className:"woo-next-payment-content",children:"Pay with Visa"})]})})]}),(0,l.jsx)(u.Z,{fullWidth:!0,name:"ordernotes",label:"ORDER NOTE ",className:"notes mt-5",onChange:z,id:"fullWidth"}),(0,l.jsx)(f,{name:"billingDifferentThanShipping",type:"checkbox",checked:null==O?void 0:O.billingDifferentThanShipping,handleOnChange:z,label:"Billing different than shipping",containerClassNames:"mb-4 pt-4"}),(null==O?void 0:O.billingDifferentThanShipping)?(0,l.jsxs)("div",{className:"billing-details",children:[(0,l.jsx)("h2",{className:"text-xl font-medium mb-4",children:"Billing Details"}),(0,l.jsx)(m.Z,{input:null==O?void 0:O.billing,handleOnChange:e=>z(e,!0,!1),isShipping:!1,isBillingOrShipping:!0})]}):null,!g&&(0,l.jsx)("div",{className:"woo-next-place-order-btn-wrap mt-5",children:(0,l.jsx)("button",{disabled:q,className:y()("bg-black-600 black centered ml-auto p-5 text-white px-5 py-3 rounded-sm w-auto xl:w-full",{"opacity-50":q}),type:"submit",children:"Complete the order"})}),q&&(0,l.jsx)("p",{children:"Processing The Order..."}),M&&(0,l.jsx)("p",{className:"error_Order mt-2",children:"There is an error while Processing Your Order Please check Your clock and Try Again OR Contact Us"})]})}):null})})})]})}},65342:function(e,n,t){"use strict";t.d(n,{w:function(){return x}});var l=t(85893),i=t(79299),a=t(96456),r=t(15861),s=t(12963),o=t(6154),c=t(41664),d=t.n(c),u=t(67294),h=t(30478),p=t(9473),m=t(77304),v=t(21283),g=t(26131),f=t.n(g);let x=e=>{let{item:n}=e,t=(0,p.I0)(),c=(0,p.v9)(i.hz),[g,x]=(0,u.useState)(c),[y,b]=(0,u.useState)([]),[j,_]=(0,u.useState)(!1),N=(0,p.v9)(v.BT),k=(e,n,t)=>{let{target:{name:l,value:i}}=e||{},a={...g,[l]:i};x(a)};(0,u.useEffect)(()=>{o.Z.get("https://raw.githubusercontent.com/Tech-Labs/egypt-governorates-and-cities-db/master/governorates.json").then(e=>{Object.values(e.data).map(e=>{b(null==e?void 0:e.data)})}).catch(e=>{})},[]);let C=[(0,l.jsx)(d(),{underline:"hover",color:"inherit",href:"/",className:"link",children:"Home"},"1"),,(0,l.jsx)(r.Z,{color:"text.primary",className:"link",children:"Shoping Information"},"3")];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{spacing:2,children:(0,l.jsx)(s.Z,{separator:"›","aria-label":"breadcrumb",children:C})}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(a.ep.SetUserInferomation(g)),t(a.ep.next())},children:[(0,l.jsxs)("div",{className:"border-b border-gray-900/10 pb-12",children:[(0,l.jsx)("h2",{className:"text-base font-semibold leading-7 mt-4 text-gray-900",children:"SHoping  Information"}),(0,l.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"Use a permanent address where you can receive mail."}),!N&&(0,l.jsxs)("div",{className:"si",style:{textTransform:"uppercase"},children:["sign Up for Best Experince",(0,l.jsx)(d(),{href:"/auth/signup",className:"mt-1 ms-2 text-sm leading-6 text-gray-600",children:"sign up"})]}),(0,l.jsx)("p",{className:"mb-1",children:"Contacts    "}),(0,l.jsx)(m.Z,{input:g,handleOnChange:e=>k(e,!0,!0),isShipping:!0,gov:y})]}),(0,l.jsx)("div",{className:"button",children:(0,l.jsx)("button",{className:"black ".concat(f().button_ch),type:"submit",children:"Continue To Payment"})})]})]})}},64598:function(e,n,t){"use strict";t.d(n,{QM:function(){return c},xu:function(){return o}});var l=e=>null==e||"object"==typeof e&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length,i=t(21436);let{v4:a}=t(46578),r=function(e,n){var t,a,r,s,o,c,d,u,h,p,m;let v=arguments.length>2&&void 0!==arguments[2]&&arguments[2],g=e.billingDifferentThanShipping?e.billing:e.shipping;return{shipping:{first_name:null==e?void 0:null===(t=e.shipping)||void 0===t?void 0:t.firstname,last_name:null==e?void 0:null===(a=e.shipping)||void 0===a?void 0:a.lastname,address_1:null==e?void 0:null===(r=e.shipping)||void 0===r?void 0:r.streetaddress,address_2:null==e?void 0:null===(s=e.shipping)||void 0===s?void 0:s.address2,city:null==e?void 0:null===(o=e.shipping)||void 0===o?void 0:o.city,country:(null==e?void 0:null===(c=e.shipping)||void 0===c?void 0:c.country)||"",state:(null==e?void 0:null===(d=e.shipping)||void 0===d?void 0:d.state)||"",postcode:null==e?void 0:null===(u=e.shipping)||void 0===u?void 0:u.zip,email:null==e?void 0:null===(h=e.shipping)||void 0===h?void 0:h.email,phone:null==e?void 0:null===(p=e.shipping)||void 0===p?void 0:p.phone,company:(null==e?void 0:null===(m=e.shipping)||void 0===m?void 0:m.company)||""},billing:{first_name:null==g?void 0:g.firstName,last_name:null==g?void 0:g.lastName,address_1:null==g?void 0:g.address1,address_2:null==g?void 0:g.address2,city:null==g?void 0:g.city,country:null==g?void 0:g.country,state:null==g?void 0:g.state,postcode:null==g?void 0:g.postcode,email:null==g?void 0:g.email,phone:null==g?void 0:g.phone,company:null==g?void 0:g.company},payment_method:null==e?void 0:e.paymentMethod,payment_method_title:null==e?void 0:e.paymentMethod,line_items:function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.reduce((e,n)=>e+n.price,0),l(e)||!(0,i.k)(e))?[]:null==e?void 0:e.map(e=>({quantity:null==e?void 0:e.quantity,product_id:(null==e?void 0:e.productId)||(null==e?void 0:e.product_id)}))}(n),shipping_lines:[{method_id:"flat_rate",method_title:"Flat Rate",total:"65.00"}],set_paid:v}},s=async(e,n,t)=>{var l,i,a,r,s;let o={orderId:null,total:"",currency:"",error:"",date_created:""};if(t)return o.error=t,o;n("");try{let t=await fetch("http://localhost:3000/api/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),c=await t.json();c.error&&(o.error=c.error,n("Something went wrong. Order creation failed. Please try again")),o.orderId=null!==(l=null==c?void 0:c.orderId)&&void 0!==l?l:"",o.total=null!==(i=c.total)&&void 0!==i?i:"",o.currency=null!==(a=c.currency)&&void 0!==a?a:"",o.paymentUrl=null!==(r=c.paymentUrl)&&void 0!==r?r:"",o.date_created=null!==(s=c.date_created)&&void 0!==s?s:Date.now()}catch(e){console.warn("Handle create order error",null==e?void 0:e.message)}return o},o=async(e,n,t,i,a,o)=>{i(!0);let c=r(e,n,o),d=await s(c,t,"");return(i(!1),console.log(c,d),l(null==d?void 0:d.orderId))?(t("Clear cart failed"),null):(a(d),d)},c=async function(e,n,t,i,a,o){let c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];i(!0);let d=r(e,n,o,c),u=await s(d,t,"");return(i(!1),l(null==u?void 0:u.orderId))?(t("Clear cart failed"),null):(a(u),u)}},83542:function(e,n,t){"use strict";var l=t(85893),i=t(79299),a=t(96456),r=t(75021);t(41609);var s=t(11163),o=t(67294),c=t(9473),d=t(64598);n.Z=()=>{let{IsPaypal:e,current:n,total:t,input:u,items:h}=(0,c.v9)(i.MS),[p,m]=(0,o.useState)(!1),[v,g]=(0,o.useState)(null),[f,x]=(0,o.useState)(null),[y,b]=(0,o.useState)(!1),[j,_]=(0,o.useState)({});(0,s.useRouter)();let N=(0,c.I0)();console.log(h,u),(0,o.useEffect)(()=>{0!==Object.keys(j).length&&(N(a.ep.SetUserOrder({cartItems:carts,orderCreation:j,TotalCart,orderInferomation:u.billingDifferentThanShipping?u.billing:u.shipping})),N(CartActions.EmptyCartItems()))},[j]);let k=async e=>{await (0,d.QM)(u,h,x,b,_,t,!0)};return v&&alert(v),(0,l.jsx)("div",{className:"paypalButtons",children:e&&1===n&&0!==t?(0,l.jsx)(r.ch,{style:{color:"silver",layout:"vertical",height:50,shape:"pill"},createOrder:(e,n)=>n.order.create({purchase_units:[{amount:{value:t}}]}),onApprove:async(e,n)=>{let t=await n.order.capture();k(t.id)},onInit:()=>{},onError:e=>{g(e)}}):null})}},63390:function(e,n,t){"use strict";t.d(n,{Bx:function(){return o},L9:function(){return a},_j:function(){return s},gE:function(){return r}});var l=t(68697);let i=e=>e.cart,a=(0,l.P1)([i],e=>e.items);(0,l.P1)([e=>e],e=>({...e.cart}));let r=(0,l.P1)([e=>e.cart.open],e=>e),s=(0,l.P1)([i],e=>0!==e.items.length?e.items.reduce((e,n)=>e+n.price*n.quantity,0):0),o=(0,l.P1)([i],e=>0!==e.items.length?e.items.reduce((e,n)=>e+n.quantity,0):0)},79299:function(e,n,t){"use strict";t.d(n,{EV:function(){return c},MS:function(){return o},dz:function(){return s},hz:function(){return a},vm:function(){return r}});var l=t(68697);let i=e=>e.checkout,a=(0,l.P1)([i],e=>{let{userInferomations:n}=e;return n}),r=(0,l.P1)([i],e=>{let{order:n}=e;return n}),s=(0,l.P1)([i],e=>{let{orders:n}=e;return n}),o=(0,l.P1)([i],e=>e),c=(0,l.P1)([i],e=>{let{current:n,steps:t}=e;return{current:n,steps:t}})},21283:function(e,n,t){"use strict";t.d(n,{BT:function(){return r},Nx:function(){return s},TO:function(){return a}});var l=t(68697);let i=e=>e.user,a=(0,l.P1)([i],e=>e),r=(0,l.P1)([i],e=>e.currentUser);(0,l.P1)([r],e=>e.imageUrl);let s=(0,l.P1)([i],e=>{let{loading:n}=e;return n})},75498:function(e){e.exports={right:"checkout_right__tm1Gl",cartItem:"checkout_cartItem__MnJDR",image:"checkout_image__k_Y7Q",left:"checkout_left__sIC5N",thankWrapper:"checkout_thankWrapper__3e7dd",all:"checkout_all__4b68m"}},26131:function(e){e.exports={element:"checkout_element__4a_aT",userInfo:"checkout_userInfo__y3ode",container:"checkout_container__Wpr0N",button_ch:"checkout_button_ch__OcLTC",wrapper:"checkout_wrapper__wNsxo","css-1u3bzj6-MuiFormControl-root-MuiTextField-root":"checkout_css-1u3bzj6-MuiFormControl-root-MuiTextField-root__w_h3j",input:"checkout_input__2GjJl"}}}]);